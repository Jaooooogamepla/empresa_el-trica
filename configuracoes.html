<!-- configuracoes.html -->
<!DOCTYPE html>
<html>
<head>
    <title>ConfiguraÃ§Ãµes - Janol.Inej</title>
    <style>
        body { font-family: Arial; margin: 0; }
        .navbar { background: #34495e; padding: 15px; }
        .navbar a { color: white; margin: 0 15px; text-decoration: none; }
        .container { padding: 20px; max-width: 500px; }
        .setting { margin: 15px 0; }
        button { padding: 8px 15px; cursor: pointer; }
    </style>
</head>
<body>

    <div class="navbar">
        <a href="dashboard.html">ğŸ“Š Dashboard</a>
        <a href="configuracoes.html">âš™ï¸ ConfiguraÃ§Ãµes</a>
    </div>

    <div class="container">
        <h1>âš™ï¸ ConfiguraÃ§Ãµes</h1>
        
        <div class="setting">
            <h3>NotificaÃ§Ãµes</h3>
            <input type="checkbox" id="notifProjetos"> Email de novos projetos<br>
            <input type="checkbox" id="notifPrazos"> Alertas de prazos
        </div>
        
        <button id="btnSalvar">ğŸ’¾ Salvar ConfiguraÃ§Ãµes</button>
    </div>

    <!-- ========================================== -->
    <!--          FIREBASE - CONFIGURAÃ‡Ã•ES          -->
    <!-- ========================================== -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getDatabase, ref, set, get, child } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCjdryEhdWNcWZpcIciZApYdZX5jXcST3A",
            authDomain: "janoline-7285c.firebaseapp.com",
            databaseURL: "https://janoline-7285c-default-rtdb.firebaseio.com",
            projectId: "janoline-7285c",
            storageBucket: "janoline-7285c.firebasestorage.app",
            messagingSenderId: "688131267684",
            appId: "1:688131267684:web:6a3d976a092512e1fad371",
            measurementId: "G-K767JLC4BP"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // Checkboxes
        const chkProjetos = document.getElementById("notifProjetos");
        const chkPrazos = document.getElementById("notifPrazos");
        const btnSalvar = document.getElementById("btnSalvar");

        // Carregar configuraÃ§Ãµes ao abrir a pÃ¡gina
        get(child(ref(db), "configuracoes"))
        .then(snap => {
            if (snap.exists()) {
                const cfg = snap.val();
                chkProjetos.checked = cfg.notifProjetos || false;
                chkPrazos.checked = cfg.notifPrazos || false;
            }
        });

        // Salvar configuraÃ§Ãµes
        btnSalvar.addEventListener("click", () => {

            set(ref(db, "configuracoes"), {
                notifProjetos: chkProjetos.checked,
                notifPrazos: chkPrazos.checked
            })
            .then(() => alert("ConfiguraÃ§Ãµes salvas!"))
            .catch(err => alert("Erro ao salvar: " + err));
        });

    </script>

</body>
</html>
